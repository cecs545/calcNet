<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Calc Net</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/main.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="machines.js"></script>
    
    <script type="text/javascript">
    
        document.getElementById('statement-input').onsumbit = function() {
            var theFormItself = document.getElementById('statement-input');
            theFormItself.style.display = 'none';
        }

        function variableLayout() {
            var doc_html= '<table><tr>';

        // ROW ONE 
            for(var i=65;i<=70;i++) {
                // Display the letters as the header
                doc_html += '<th>' + String.fromCharCode(i) + '</th>';
                console.log(document.getElementById('var_table').innerHTML);
            }
            doc_html += '</tr><br><tr>';

            for(var i=65;i<=70;i++) {
                // Display the letter values as initialized in machines.js
                var alpha = String.fromCharCode(i);
                doc_html += '<td class="td"><input id="val' + alpha + '" value="' + objectD.getVariableBoxVal(alpha) + '" size="2" > </input></td>';
            }
            doc_html += '</tr><tr>';
        // ROW TWO
            for(var i=71;i<=76;i++) {
                // Display the letters as the header
                doc_html += "<th>" + String.fromCharCode(i) + "</th>";
            }
            doc_html += '</tr><tr>';
            for(var i=71;i<=76;i++) {
                // Display the letter values as initialized in machines.js
                var alpha = String.fromCharCode(i);
                doc_html += '<td class="td"><input id="val' + alpha + '" value="' + objectD.getVariableBoxVal(alpha) + '" size="2" > </input></td>';
            }
        // ROW THREE
        doc_html += '</tr><tr>';
            for(var i=77;i<=82;i++) {
                // Display the letters as the header
                doc_html += "<th>" + String.fromCharCode(i) + "</th>";
            }
            doc_html += '</tr><tr>';
            for(var i=77;i<=82;i++) {
                // Display the letter values as initialized in machines.js
                var alpha = String.fromCharCode(i);
                doc_html += '<td class="td"><input id="val' + alpha + '" value="' + objectD.getVariableBoxVal(alpha) + '" size="2" > </input></td>';
            }
        // ROW FOUR
        doc_html += '</tr><tr>';
            for(var i=83;i<=88;i++) {
                // Display the letters as the header
                doc_html += "<th>" + String.fromCharCode(i) + "</th>";
            }
            doc_html += '</tr><tr>';
            for(var i=83;i<=88;i++) {
                // Display the letter values as initialized in machines.js
                var alpha = String.fromCharCode(i);
                doc_html += '<td class="td"><input id="val' + alpha + '" value="' + objectD.getVariableBoxVal(alpha) + '" size="2" > </input></td>';
            }
        // ROW THREE
        doc_html += '</tr><tr>';
            for(var i=89;i<=90;i++) {
                // Display the letters as the header
                doc_html += "<th>" + String.fromCharCode(i) + "</th>";
            }
            doc_html += '</tr><tr>';
            for(var i=89;i<=90;i++) {
                // Display the letter values as initialized in machines.js
                var alpha = String.fromCharCode(i);
                doc_html += '<td class="td"><input id="val' + alpha + '" value="' + objectD.getVariableBoxVal(alpha) + '" size="2" > </input></td>';
            }
            doc_html += '</tr></table>';
            document.getElementById('var_table').innerHTML = doc_html;
    }
                                        
        function validateInputs(form) {
            if(form.input1.value.trim() === "") {
                alert("Input 1 must have an expression.");
                return false;
            }
            if(form.input2.value.trim() === "") {
                alert("Input 2 must have an expression.");
                return false;
            }
            if(form.input3.value.trim() === "") {
                alert("Input 3 must have an expression.");
                return false;
            }
            if(form.input4.value.trim() === "") {
                alert("Input 4 must have an expression.");
                return false;
            }
            if(form.input5.value.trim() === "") {
                alert("Input 5 must have an expression.");
                return false;
            }
        }


        function inputExpr(form) {
            // console.log("Hello World");
            
            if(form.input1.value.trim() === "" && form.input2.value.trim() === "" && form.input3.value.trim() === "" && form.input4.value.trim() === "" && form.input5.value.trim() === "") {
                alert("Enter at least one expression.");
                return false;
            }

            var allInputs = [];            

            for (let i = 1; i < 6; i++) {
                var input = "input"+i;

                if (form[input].value !== "") {
                    // if ((/^[^\s@]+\.$/.test(form[input].value)) === false) {
                    //     alert("The end of input is marked with a period mark");
                    //     return false;
                    // }
                    allInputs.push(form[input].value.replace(/\s/g, ''));
                }
                document.getElementById(input).value = "";
            }
            // allInputs.push('Z=5*X^2+7*Y^3+X*Y') //Z = 107, when {x = 3, y = 2} 

            mContainer.I(allInputs);
            $('#ModalExpr').modal('hide');
        }

        function inputVariables(form) {
            
            // document.getElementById()
        // variableLayout();

            for (let i = 65; i <= 90; i++){
                var alpha = String.fromCharCode(i);

                var variable = "val"+alpha;
                // var value = form.variable.value;
                
                // console.log(form[variable].value);

                // var value = document.getElementById("val"+alpha).value;
                objectD.setVariableBox(alpha, form[variable].value);
            }
            $('#myModal').modal('hide');
        }

    </script>
</head>
<body style="background-color: aliceblue">
    <div class="container">
        <div class="row btn-row">
            <div class="col-md-3 offset-md-3 align-self-center">
                    <!-- Variable The Modal -->
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Variables</button>
                <form id="statement-input" onsubmit="inputVariables(this); return false">

                    <div class="modal" id="myModal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Edit the default variable values:</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                
                                <!--Variable Modal body -->
                                <div class="modal-body">
                                    <div class="form-group table" id="var_table">

                                        
                                    </div>
                                </div>
                                
                                <!-- Variable Modal footer -->
                                <div class="modal-footer">
                                    <input type="submit" class="btn btn-success" value="submit"></input>
                                </div>
        
                            </div>
                            </div>
                        </div>
                    
                </form>
            </div>

            <div class="col-md-6 align-self-center">
            <!-- Expression Modal -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalExpr">Expressions</button>
            <form id="statement-input" onsubmit="inputExpr(this); return false">

            <div class="modal" id="ModalExpr">
                <div class="modal-dialog">
                    <div class="modal-content">
                    
                        <div class="modal-header">
                            <h4 class="modal-title">Enter at least one expression:</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        
                        <!--Expression Modal body -->
                        <div class="modal-body">
                            <div class="form-group table">
                                <div class="form-group">
                                    <label for="text">Input expression 1:</label>
                                    <input type="text" class="form-control" name="input1" id="input1">
                                </div>
                                <div class="form-group">
                                    <label for="text">Input expression 2:</label>
                                    <input type="text" class="form-control" name="input2" id="input2">
                                </div>
                                <div class="form-group">
                                    <label for="text">Input expression 3:</label>
                                    <input type="text" class="form-control" name="input3" id="input3">
                                </div>
                                <div class="form-group">
                                    <label for="text">Input expression 4:</label>
                                    <input type="text" class="form-control" name="input4" id="input4">
                                </div>
                                <div class="form-group">
                                    <label for="text">Input expression 5:</label>
                                    <input type="text" class="form-control" name="input5" id="input5">
                                </div>
                            </div>
                        </div>
                        
                        <!--Expression Modal footer -->
                        <div class="modal-footer">
                            <input type="submit" class="btn btn-success" value="submit"></input>
                        </div>
    
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
    <div class="row" id="expr_output">
        <h5>Results:</h5>
        <br>
    </div>
        <div class="row">
            <div class="col-3">
                Input Machine<br>
                <span id="Ii-expr">Machine I</span>
                <br><br>
                <span id="Io-expr">Machine I output</span>
            </div>
            <div class="col-1 hline" id="IA"></div>
            <div class="col-3">
                Assignment Machine<br>
                <span id="Ai-expr">Machine A</span>
                <br><br>
                <span id="Ao-expr">Machine A</span>
            </div>
            <div class="col-1 hline" id="AE"></div>
            <div class="col-3">
                Expression Machine<br>
                <span id="E-expr">Machine E</span>
            </div>
        </div>
        <div class="row">
            <div class="col-9"></div>
            <div class="col-1 vl_line" id="ET1"></div>
            <div class="col-1 vr_line" id="ET2"></div>
        </div>
        <div class="row">
                <div class="col-7"></div>
                <div class="col-2">
                    Term 1<br>
                    <span id="T1-expr">Machine T1</span>
                    <br><br>
                    <span id="T1o-expr"></span>
                </div>
                <div class="col-1"></div>
                <div class="col-2">
                    Term 2<br>
                    <span id="T2-expr">Machine T2</span>
                    <br><br>
                    <span id="T2o-expr"></span>
                </div>
        </div>
        <div class="row">
            <div class="col-8"></div>
            <div class="col-1 vr_line" id="T1P">
                <span class="t1d_line" id="T1D"></span>
            </div>
            <div class="col-1"></div>
            <div class="col-1"></div>
            <div class="col-1 vl_line" id="T2P">
                <span class="t2d_line" id="T2D"></span>
            </div>
        </div>
        <div class="row">
            <div class="col-4"></div>
            <div class="col-3">
                Data Machine<br>
                <span id="Di-expr">Machine D</span>
            </div>
            <div class="col-1 hline" style="border-bottom: 1px dashed black; " id="PD"></div>
            <div class="col-3">
                Power Machine<br>
                <span id="Pi-expr">Machine P</span>
                <br><br>
                <span id="Po-expr">Machine P</span>
            </div>            
        </div>
    </div>
    
</body>
</html>